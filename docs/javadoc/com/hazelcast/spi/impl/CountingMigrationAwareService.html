<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_162) on Tue Oct 23 14:06:06 UTC 2018 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>CountingMigrationAwareService (Hazelcast Root 3.11 API)</title>
<meta name="date" content="2018-10-23">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="CountingMigrationAwareService (Hazelcast Root 3.11 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CountingMigrationAwareService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/hazelcast/spi/impl/BinaryOperationFactory.html" title="class in com.hazelcast.spi.impl"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/hazelcast/spi/impl/MutatingOperation.html" title="interface in com.hazelcast.spi.impl"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/hazelcast/spi/impl/CountingMigrationAwareService.html" target="_top">Frames</a></li>
<li><a href="CountingMigrationAwareService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.hazelcast.spi.impl</div>
<h2 title="Class CountingMigrationAwareService" class="title">Class CountingMigrationAwareService</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://download.oracle.com/javase/1.6.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.hazelcast.spi.impl.CountingMigrationAwareService</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../com/hazelcast/spi/FragmentedMigrationAwareService.html" title="interface in com.hazelcast.spi">FragmentedMigrationAwareService</a>, <a href="../../../../com/hazelcast/spi/MigrationAwareService.html" title="interface in com.hazelcast.spi">MigrationAwareService</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">CountingMigrationAwareService</span>
extends <a href="http://download.oracle.com/javase/1.6.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../com/hazelcast/spi/FragmentedMigrationAwareService.html" title="interface in com.hazelcast.spi">FragmentedMigrationAwareService</a></pre>
<div class="block">A <a href="../../../../com/hazelcast/spi/MigrationAwareService.html" title="interface in com.hazelcast.spi"><code>MigrationAwareService</code></a> that delegates to another <a href="../../../../com/hazelcast/spi/MigrationAwareService.html" title="interface in com.hazelcast.spi"><code>MigrationAwareService</code></a> and keeps track of the number of
 migrations concerning the partition owner (either as current or new replica index) currently in-flight.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../com/hazelcast/spi/impl/CountingMigrationAwareService.html#CountingMigrationAwareService-com.hazelcast.spi.FragmentedMigrationAwareService-">CountingMigrationAwareService</a></span>(<a href="../../../../com/hazelcast/spi/FragmentedMigrationAwareService.html" title="interface in com.hazelcast.spi">FragmentedMigrationAwareService</a>&nbsp;migrationAwareService)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/hazelcast/spi/impl/CountingMigrationAwareService.html#beforeMigration-com.hazelcast.spi.PartitionMigrationEvent-">beforeMigration</a></span>(<a href="../../../../com/hazelcast/spi/PartitionMigrationEvent.html" title="class in com.hazelcast.spi">PartitionMigrationEvent</a>&nbsp;event)</code>
<div class="block">Called before migration process starts, on both source and destination members.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/hazelcast/spi/impl/CountingMigrationAwareService.html#commitMigration-com.hazelcast.spi.PartitionMigrationEvent-">commitMigration</a></span>(<a href="../../../../com/hazelcast/spi/PartitionMigrationEvent.html" title="class in com.hazelcast.spi">PartitionMigrationEvent</a>&nbsp;event)</code>
<div class="block">Commits the migration process for this service, on both source and destination members.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/1.6.0/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../com/hazelcast/spi/ServiceNamespace.html" title="interface in com.hazelcast.spi">ServiceNamespace</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/hazelcast/spi/impl/CountingMigrationAwareService.html#getAllServiceNamespaces-com.hazelcast.spi.PartitionReplicationEvent-">getAllServiceNamespaces</a></span>(<a href="../../../../com/hazelcast/spi/PartitionReplicationEvent.html" title="class in com.hazelcast.spi">PartitionReplicationEvent</a>&nbsp;event)</code>
<div class="block">Returns all known namespaces for given replication event.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/hazelcast/spi/impl/CountingMigrationAwareService.html#getMigrationStamp--">getMigrationStamp</a></span>()</code>
<div class="block">Returns a stamp to denote current migration state which can later be validated
 using <a href="../../../../com/hazelcast/spi/impl/CountingMigrationAwareService.html#validateMigrationStamp-int-"><code>validateMigrationStamp(int)</code></a>.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/hazelcast/spi/impl/CountingMigrationAwareService.html#isKnownServiceNamespace-com.hazelcast.spi.ServiceNamespace-">isKnownServiceNamespace</a></span>(<a href="../../../../com/hazelcast/spi/ServiceNamespace.html" title="interface in com.hazelcast.spi">ServiceNamespace</a>&nbsp;namespace)</code>
<div class="block">Returns true if namespace is known by this service, false otherwise</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../com/hazelcast/spi/Operation.html" title="class in com.hazelcast.spi">Operation</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/hazelcast/spi/impl/CountingMigrationAwareService.html#prepareReplicationOperation-com.hazelcast.spi.PartitionReplicationEvent-">prepareReplicationOperation</a></span>(<a href="../../../../com/hazelcast/spi/PartitionReplicationEvent.html" title="class in com.hazelcast.spi">PartitionReplicationEvent</a>&nbsp;event)</code>
<div class="block">Returns an operation to replicate service data and/or state for a specific partition replica
 on another cluster member.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../../../../com/hazelcast/spi/Operation.html" title="class in com.hazelcast.spi">Operation</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/hazelcast/spi/impl/CountingMigrationAwareService.html#prepareReplicationOperation-com.hazelcast.spi.PartitionReplicationEvent-java.util.Collection-">prepareReplicationOperation</a></span>(<a href="../../../../com/hazelcast/spi/PartitionReplicationEvent.html" title="class in com.hazelcast.spi">PartitionReplicationEvent</a>&nbsp;event,
                           <a href="http://download.oracle.com/javase/1.6.0/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../com/hazelcast/spi/ServiceNamespace.html" title="interface in com.hazelcast.spi">ServiceNamespace</a>&gt;&nbsp;namespaces)</code>
<div class="block">Returns an operation to replicate service data and/or state for a specific partition replica and namespaces
 on another cluster member.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/hazelcast/spi/impl/CountingMigrationAwareService.html#rollbackMigration-com.hazelcast.spi.PartitionMigrationEvent-">rollbackMigration</a></span>(<a href="../../../../com/hazelcast/spi/PartitionMigrationEvent.html" title="class in com.hazelcast.spi">PartitionMigrationEvent</a>&nbsp;event)</code>
<div class="block">Rollback the migration process for this service, on both source and destination members.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/hazelcast/spi/impl/CountingMigrationAwareService.html#validateMigrationStamp-int-">validateMigrationStamp</a></span>(int&nbsp;stamp)</code>
<div class="block">Returns true if there's no primary replica migrations started and/or completed
 since issuance of the given stamp.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://download.oracle.com/javase/1.6.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://download.oracle.com/javase/1.6.0/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://download.oracle.com/javase/1.6.0/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://download.oracle.com/javase/1.6.0/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://download.oracle.com/javase/1.6.0/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://download.oracle.com/javase/1.6.0/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://download.oracle.com/javase/1.6.0/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://download.oracle.com/javase/1.6.0/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://download.oracle.com/javase/1.6.0/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://download.oracle.com/javase/1.6.0/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/1.6.0/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/1.6.0/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="CountingMigrationAwareService-com.hazelcast.spi.FragmentedMigrationAwareService-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CountingMigrationAwareService</h4>
<pre>public&nbsp;CountingMigrationAwareService(<a href="../../../../com/hazelcast/spi/FragmentedMigrationAwareService.html" title="interface in com.hazelcast.spi">FragmentedMigrationAwareService</a>&nbsp;migrationAwareService)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getAllServiceNamespaces-com.hazelcast.spi.PartitionReplicationEvent-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllServiceNamespaces</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/1.6.0/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../com/hazelcast/spi/ServiceNamespace.html" title="interface in com.hazelcast.spi">ServiceNamespace</a>&gt;&nbsp;getAllServiceNamespaces(<a href="../../../../com/hazelcast/spi/PartitionReplicationEvent.html" title="class in com.hazelcast.spi">PartitionReplicationEvent</a>&nbsp;event)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/hazelcast/spi/FragmentedMigrationAwareService.html#getAllServiceNamespaces-com.hazelcast.spi.PartitionReplicationEvent-">FragmentedMigrationAwareService</a></code></span></div>
<div class="block">Returns all known namespaces for given replication event.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/hazelcast/spi/FragmentedMigrationAwareService.html#getAllServiceNamespaces-com.hazelcast.spi.PartitionReplicationEvent-">getAllServiceNamespaces</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/hazelcast/spi/FragmentedMigrationAwareService.html" title="interface in com.hazelcast.spi">FragmentedMigrationAwareService</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>event</code> - replication event</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>all known service namespaces for the replication</dd>
</dl>
</li>
</ul>
<a name="isKnownServiceNamespace-com.hazelcast.spi.ServiceNamespace-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isKnownServiceNamespace</h4>
<pre>public&nbsp;boolean&nbsp;isKnownServiceNamespace(<a href="../../../../com/hazelcast/spi/ServiceNamespace.html" title="interface in com.hazelcast.spi">ServiceNamespace</a>&nbsp;namespace)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/hazelcast/spi/FragmentedMigrationAwareService.html#isKnownServiceNamespace-com.hazelcast.spi.ServiceNamespace-">FragmentedMigrationAwareService</a></code></span></div>
<div class="block">Returns true if namespace is known by this service, false otherwise</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/hazelcast/spi/FragmentedMigrationAwareService.html#isKnownServiceNamespace-com.hazelcast.spi.ServiceNamespace-">isKnownServiceNamespace</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/hazelcast/spi/FragmentedMigrationAwareService.html" title="interface in com.hazelcast.spi">FragmentedMigrationAwareService</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>namespace</code> - namespace</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if namespace is known by this service, false otherwise</dd>
</dl>
</li>
</ul>
<a name="prepareReplicationOperation-com.hazelcast.spi.PartitionReplicationEvent-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepareReplicationOperation</h4>
<pre>public&nbsp;<a href="../../../../com/hazelcast/spi/Operation.html" title="class in com.hazelcast.spi">Operation</a>&nbsp;prepareReplicationOperation(<a href="../../../../com/hazelcast/spi/PartitionReplicationEvent.html" title="class in com.hazelcast.spi">PartitionReplicationEvent</a>&nbsp;event)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/hazelcast/spi/MigrationAwareService.html#prepareReplicationOperation-com.hazelcast.spi.PartitionReplicationEvent-">MigrationAwareService</a></code></span></div>
<div class="block">Returns an operation to replicate service data and/or state for a specific partition replica
 on another cluster member.
 <p>
 This method will be called on source member whenever partitioning system requires
 to copy/replicate a partition replica. Returned operation will be executed on destination member.
 If operation fails by throwing exception, migration process will fail and will be rolled back.
 <p>
 Returning null is allowed and means service does not have anything to replicate.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/hazelcast/spi/MigrationAwareService.html#prepareReplicationOperation-com.hazelcast.spi.PartitionReplicationEvent-">prepareReplicationOperation</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/hazelcast/spi/MigrationAwareService.html" title="interface in com.hazelcast.spi">MigrationAwareService</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>event</code> - replication</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>replication operation or null if nothing will be replicated</dd>
</dl>
</li>
</ul>
<a name="prepareReplicationOperation-com.hazelcast.spi.PartitionReplicationEvent-java.util.Collection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepareReplicationOperation</h4>
<pre>public&nbsp;<a href="../../../../com/hazelcast/spi/Operation.html" title="class in com.hazelcast.spi">Operation</a>&nbsp;prepareReplicationOperation(<a href="../../../../com/hazelcast/spi/PartitionReplicationEvent.html" title="class in com.hazelcast.spi">PartitionReplicationEvent</a>&nbsp;event,
                                             <a href="http://download.oracle.com/javase/1.6.0/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../com/hazelcast/spi/ServiceNamespace.html" title="interface in com.hazelcast.spi">ServiceNamespace</a>&gt;&nbsp;namespaces)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/hazelcast/spi/FragmentedMigrationAwareService.html#prepareReplicationOperation-com.hazelcast.spi.PartitionReplicationEvent-java.util.Collection-">FragmentedMigrationAwareService</a></code></span></div>
<div class="block">Returns an operation to replicate service data and/or state for a specific partition replica and namespaces
 on another cluster member. This method is very similar to
 <a href="../../../../com/hazelcast/spi/MigrationAwareService.html#prepareReplicationOperation-com.hazelcast.spi.PartitionReplicationEvent-"><code>MigrationAwareService.prepareReplicationOperation(PartitionReplicationEvent)</code></a>,
 instead of copying whole partition replica, allows copying only some portion of replica,
 specified by given namespaces.

 <p>
 This method will be called on source member whenever partitioning system requires
 to copy/replicate a partition replica. Returned operation will be executed on destination member.
 If operation fails by throwing exception, migration process will fail and will be rolled back.
 <p>
 Returning null is allowed and means service does not have anything to replicate.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/hazelcast/spi/FragmentedMigrationAwareService.html#prepareReplicationOperation-com.hazelcast.spi.PartitionReplicationEvent-java.util.Collection-">prepareReplicationOperation</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/hazelcast/spi/FragmentedMigrationAwareService.html" title="interface in com.hazelcast.spi">FragmentedMigrationAwareService</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>event</code> - replication event</dd>
<dd><code>namespaces</code> - replica fragment namespaces to replicate</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>replication operation or null if nothing will be replicated</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/hazelcast/spi/MigrationAwareService.html#prepareReplicationOperation-com.hazelcast.spi.PartitionReplicationEvent-"><code>MigrationAwareService.prepareReplicationOperation(PartitionReplicationEvent)</code></a></dd>
</dl>
</li>
</ul>
<a name="beforeMigration-com.hazelcast.spi.PartitionMigrationEvent-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beforeMigration</h4>
<pre>public&nbsp;void&nbsp;beforeMigration(<a href="../../../../com/hazelcast/spi/PartitionMigrationEvent.html" title="class in com.hazelcast.spi">PartitionMigrationEvent</a>&nbsp;event)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/hazelcast/spi/MigrationAwareService.html#beforeMigration-com.hazelcast.spi.PartitionMigrationEvent-">MigrationAwareService</a></code></span></div>
<div class="block">Called before migration process starts, on both source and destination members.
 <p>
 Service can take actions required before migration. Migration process will block until this method returns.
 If this method fails by throwing an exception, migration process for specific partition will fail
 and will be rolled back.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/hazelcast/spi/MigrationAwareService.html#beforeMigration-com.hazelcast.spi.PartitionMigrationEvent-">beforeMigration</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/hazelcast/spi/MigrationAwareService.html" title="interface in com.hazelcast.spi">MigrationAwareService</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>event</code> - migration event</dd>
</dl>
</li>
</ul>
<a name="commitMigration-com.hazelcast.spi.PartitionMigrationEvent-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commitMigration</h4>
<pre>public&nbsp;void&nbsp;commitMigration(<a href="../../../../com/hazelcast/spi/PartitionMigrationEvent.html" title="class in com.hazelcast.spi">PartitionMigrationEvent</a>&nbsp;event)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/hazelcast/spi/MigrationAwareService.html#commitMigration-com.hazelcast.spi.PartitionMigrationEvent-">MigrationAwareService</a></code></span></div>
<div class="block">Commits the migration process for this service, on both source and destination members.
 This method will be called after all replication operations are executed successfully on destination
 and master member receives success response from all participants.
 <p>
 Commit is not expected to fail at this point, all exceptions will be suppressed and logged.
 Implementations of this method must be thread safe as this method may be called concurrently
 for different migrations on different partitions.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/hazelcast/spi/MigrationAwareService.html#commitMigration-com.hazelcast.spi.PartitionMigrationEvent-">commitMigration</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/hazelcast/spi/MigrationAwareService.html" title="interface in com.hazelcast.spi">MigrationAwareService</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>event</code> - migration event</dd>
</dl>
</li>
</ul>
<a name="rollbackMigration-com.hazelcast.spi.PartitionMigrationEvent-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollbackMigration</h4>
<pre>public&nbsp;void&nbsp;rollbackMigration(<a href="../../../../com/hazelcast/spi/PartitionMigrationEvent.html" title="class in com.hazelcast.spi">PartitionMigrationEvent</a>&nbsp;event)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/hazelcast/spi/MigrationAwareService.html#rollbackMigration-com.hazelcast.spi.PartitionMigrationEvent-">MigrationAwareService</a></code></span></div>
<div class="block">Rollback the migration process for this service, on both source and destination members.
 This method will be called when migration process fails at any moment.
 Reasons for failure may be an exception thrown on any migration step
 or failure(s) of any of the migration participants; either master or source or destination.
 <p>
 Rollback is not expected to fail at this point, all exceptions will be suppressed and logged.
 Implementations of this method must be thread safe as this method may be called concurrently
 for different migrations on different partitions.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/hazelcast/spi/MigrationAwareService.html#rollbackMigration-com.hazelcast.spi.PartitionMigrationEvent-">rollbackMigration</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/hazelcast/spi/MigrationAwareService.html" title="interface in com.hazelcast.spi">MigrationAwareService</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>event</code> - migration event</dd>
</dl>
</li>
</ul>
<a name="getMigrationStamp--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMigrationStamp</h4>
<pre>public&nbsp;int&nbsp;getMigrationStamp()</pre>
<div class="block">Returns a stamp to denote current migration state which can later be validated
 using <a href="../../../../com/hazelcast/spi/impl/CountingMigrationAwareService.html#validateMigrationStamp-int-"><code>validateMigrationStamp(int)</code></a>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>migration stamp</dd>
</dl>
</li>
</ul>
<a name="validateMigrationStamp-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>validateMigrationStamp</h4>
<pre>public&nbsp;boolean&nbsp;validateMigrationStamp(int&nbsp;stamp)</pre>
<div class="block">Returns true if there's no primary replica migrations started and/or completed
 since issuance of the given stamp. Otherwise returns false, if there's an ongoing migration
 when stamp is issued or a new migration is started (and optionally completed) after stamp is issued.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stamp</code> - a stamp</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true stamp is valid since issuance of the given stamp, false otherwise</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CountingMigrationAwareService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/hazelcast/spi/impl/BinaryOperationFactory.html" title="class in com.hazelcast.spi.impl"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/hazelcast/spi/impl/MutatingOperation.html" title="interface in com.hazelcast.spi.impl"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/hazelcast/spi/impl/CountingMigrationAwareService.html" target="_top">Frames</a></li>
<li><a href="CountingMigrationAwareService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2018 <a href="http://www.hazelcast.com/">Hazelcast, Inc.</a>. All Rights Reserved.</small></p>
</body>
</html>
